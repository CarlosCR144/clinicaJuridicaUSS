{% extends "base.html" %}
{% block title %}Historial del Registro{% endblock %}

{% block content %}
<div class="card card-modern">
  <div class="card-header-modern d-flex justify-content-between align-items-center">
    <span>Historial del Registro – {{ causa.rol_rit }}</span>
    <a href="{% url 'casos:detalle' causa.id %}" class="btn btn-outline-secondary btn-sm">Volver</a>
  </div>

  <div class="card-body">
    {% if historial %}
      <div class="vstack gap-3">
        {% for h in historial %}
          <div class="border rounded-3 p-3 bg-light">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div class="fw-semibold">
                {{ h.creado_en|date:"d/m/Y H:i" }}
              </div>
              <small class="text-muted">
                Por: {{ h.creado_por.get_full_name|default:"(Sin usuario) SIN DEFINIR EDITAR" }}
              </small>
            </div>

            <pre class="mb-0" style="white-space: pre-wrap; font-family: inherit;">{{ h.contenido }}</pre>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="text-muted">Aún no hay versiones anteriores.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
