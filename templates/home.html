{% extends 'base.html' %}

{% block title %}Inicio - Clínica Jurídica USS{% endblock %}

{% block content %}
<div class="row mb-4">
  <div class="col-md-12">
    <h1 class="display-5 text-primary fw-bold">Bienvenido, {{ user.first_name }}</h1>
    <p class="text-muted">Panel de Control - {{ user.get_rol_display }}</p>
  </div>
</div>

<div class="row g-4 mb-5">
  <!-- Card: Casos Activos -->
  <div class="col-md-4">
    <div class="card h-100 border-start border-4 border-primary">
      <div class="card-body">
        <h5 class="card-title text-muted text-uppercase fs-6">Casos Activos</h5>
        <div class="d-flex align-items-center mt-3">
          <div class="display-4 fw-bold text-dark me-3">{{ mis_casos_count }}</div>
          <div class="text-success small"><i class="bi bi-arrow-up"></i></div>
        </div>
        <a href="{% url 'casos:lista' %}" class="btn btn-outline-primary btn-sm mt-3 stretched-link">Ver Casos</a>
      </div>
    </div>
  </div>

  <!-- Card: Citas Hoy -->
  <div class="col-md-4">
    <div class="card h-100 border-start border-4 border-warning">
      <div class="card-body">
        <h5 class="card-title text-muted text-uppercase fs-6">Citas Hoy</h5>
        <div class="d-flex align-items-center mt-3">
          <div class="display-4 fw-bold text-dark me-3">{{ citas_hoy_count }}</div>
        </div>
        <p class="text-muted small mb-0">Programadas para hoy</p>
        <a href="{% url 'agenda:lista' %}" class="btn btn-outline-warning btn-sm mt-3 stretched-link">Ver Agenda</a>
      </div>
    </div>
  </div>

  <!-- Card: Documentos Recientes -->
  <div class="col-md-4">
    <div class="card h-100 border-start border-4 border-success">
      <div class="card-body">
        <h5 class="card-title text-muted text-uppercase fs-6">Docs. Recientes</h5>
        <div class="d-flex align-items-center mt-3">
          <div class="display-4 fw-bold text-dark me-3">{{ docs_recent_count }}</div>
        </div>
        <p class="text-muted small mb-0">Subidos últimos 7 días</p>
        <a href="{% url 'documentos:lista' %}" class="btn btn-outline-success btn-sm mt-3 stretched-link">Gestor
          Documental</a>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header bg-white d-flex justify-content-between align-items-center">
        <span>Accesos Rápidos</span>
      </div>
      <div class="card-body">
        <div class="d-grid gap-2">
          <a href="{% url 'casos:crear' %}" class="btn btn-light text-start"><i class="bi bi-folder-plus me-2"></i>
            Nuevo Caso</a>
          <a href="{% url 'agenda:crear' %}" class="btn btn-light text-start"><i class="bi bi-calendar-plus me-2"></i>
            Agendar Cita</a>
          <a href="{% url 'documentos:subir_general' %}" class="btn btn-light text-start"><i
              class="bi bi-cloud-upload me-2"></i> Subir Documento</a>
          {% if user.is_staff %}
          <a href="{% url 'personas:audit_log' %}" class="btn btn-light text-start"><i
              class="bi bi-shield-lock me-2"></i> Registro de Auditoría</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card h-100 bg-primary text-white"
      style="background: linear-gradient(135deg, #0d6efd 0%, #0043a8 100%);">
      <div class="card-body d-flex flex-column justify-content-center align-items-center text-center">
        <h4>Clínica Jurídica</h4>
        <p class="mb-4">Sistema de Gestión de Casos y Atención a Clientes</p>
        <div class="opacity-50">
          <small>Versión Prototipo 1.0</small>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}